{"version":3,"file":"authentication.js","sourceRoot":"","sources":["../../src/authentication.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAUlC,MAAM,oBAAoB,GAAG,2BAA2B,CAAC;AACzD,MAAM,uBAAuB,GAAG,8BAA8B,CAAC;AAC/D,MAAM,gBAAgB,GAAG,qBAAqB,CAAC;AAC/C,MAAM,CAAC,MAAM,aAAa,GAAG,8CAA8C,CAAC;AAa5E,MAAM,OAAO,8BAA8B;IAIzC,YAAY,UAAgC;QAH5C,SAAI,GAAW,gCAAgC,CAAC;QAI9C,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,WAAW,CAAC,OAAwB,EAAE,IAAiB;QACrD,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAC/D,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAErE,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;CACF;AAED,MAAM,OAAO,sCAAsC;IAIjD,YAAY,UAA8B;QAH1C,SAAI,GAAW,wCAAwC,CAAC;QAItD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,WAAW,CAAC,OAAwB,EAAE,IAAiB;QACrD,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAE/D,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;CACF;AAED,MAAM,OAAO,6CAA6C;IAIxD,YAAY,UAAqC;QAHjD,SAAI,GAAW,+CAA+C,CAAC;QAI7D,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,WAAW,CAAC,OAAwB,EAAE,IAAiB;QACrD,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACrE,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;QAEvE,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;CACF","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { AzureKeyCredential, TokenCredential } from \"@azure/core-auth\";\nimport {\n  PipelinePolicy,\n  PipelineRequest,\n  PipelineResponse,\n  SendRequest,\n} from \"@azure/core-rest-pipeline\";\n\nconst APIM_KEY_HEADER_NAME = \"Ocp-Apim-Subscription-Key\";\nconst APIM_REGION_HEADER_NAME = \"Ocp-Apim-Subscription-Region\";\nconst APIM_RESOURCE_ID = \"Ocp-Apim-ResourceId\";\nexport const DEFAULT_SCOPE = \"https://cognitiveservices.azure.com/.default\";\n\nexport interface TranslatorCredential {\n  key: string;\n  region: string;\n}\n\nexport interface TranslatorTokenCredential {\n  tokenCredential: TokenCredential;\n  region: string;\n  azureResourceId: string;\n}\n\nexport class TranslatorAuthenticationPolicy implements PipelinePolicy {\n  name: string = \"TranslatorAuthenticationPolicy\";\n  credential: TranslatorCredential;\n\n  constructor(credential: TranslatorCredential) {\n    this.credential = credential;\n  }\n\n  sendRequest(request: PipelineRequest, next: SendRequest): Promise<PipelineResponse> {\n    request.headers.set(APIM_KEY_HEADER_NAME, this.credential.key);\n    request.headers.set(APIM_REGION_HEADER_NAME, this.credential.region);\n\n    return next(request);\n  }\n}\n\nexport class TranslatorAzureKeyAuthenticationPolicy implements PipelinePolicy {\n  name: string = \"TranslatorAzureKeyAuthenticationPolicy\";\n  credential: AzureKeyCredential;\n\n  constructor(credential: AzureKeyCredential) {\n    this.credential = credential;\n  }\n\n  sendRequest(request: PipelineRequest, next: SendRequest): Promise<PipelineResponse> {\n    request.headers.set(APIM_KEY_HEADER_NAME, this.credential.key);\n\n    return next(request);\n  }\n}\n\nexport class TranslatorTokenCredentialAuthenticationPolicy implements PipelinePolicy {\n  name: string = \"TranslatorTokenCredentialAuthenticationPolicy\";\n  credential: TranslatorTokenCredential;\n\n  constructor(credential: TranslatorTokenCredential) {\n    this.credential = credential;\n  }\n\n  sendRequest(request: PipelineRequest, next: SendRequest): Promise<PipelineResponse> {\n    request.headers.set(APIM_REGION_HEADER_NAME, this.credential.region);\n    request.headers.set(APIM_RESOURCE_ID, this.credential.azureResourceId);\n\n    return next(request);\n  }\n}\n"]}